(()=>{var n=function(){if(window.location.hostname.includes("instagram.com")){console.log("Creating Instagram Instant button...");var n=function(){var n=document.querySelector("#mount_0_0_tV > div > div > div.x9f619.x1n2onr6.x1ja2u2z > div > div > div.x78zum5.xdt5ytf.x1t2pt76.x1n2onr6.x1ja2u2z.x10cihs4 > div.html-div.xdj266r.x14z9mp.xat24cr.x1lziwak.xexx8yu.xyri2b.x18d9i69.x1c1uobl.x9f619.x16ye13r.xvbhtw8.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.x1q0g3np.xqjyukv.x1qjc9v5.x1oa3qoh.x1qughib > div.xvc5jky.xh8yej3.x10o80wk.x14k21rp.x17snn68.x6osk4m.x1porb0y.x8vgawa > section > main > div.x1qjc9v5.x78zum5.x1q0g3np.xl56j7k.xh8yej3 > div > div > div.html-div.xdj266r.x14z9mp.xat24cr.x1lziwak.xexx8yu.xyri2b.x18d9i69.x1c1uobl.x9f619.xjbqb8w.x78zum5.x15mokao.x1ga7v0g.x16uus16.xbiv7yw.x1uhb9sk.x1plvlek.xryxfnj.x1c4vz4f.x2lah0s.xdt5ytf.xqjyukv.x6s0dn4.x1oa3qoh.x1nhvcw1 > div > div:nth-child(1) > div > article:nth-child(1) > div > div.x1lliihq.x1n2onr6 > div > div > section.x6s0dn4.xrvj5dj.x1o61qjw.x12nagc.x1gslohp");if(!n){console.log("Primary section not found, trying fallback selectors...");for(var t=null,e=0,o=['section[role="main"] section',"article section",'div[role="button"] svg[aria-label*="Save"]','svg[aria-label*="Save"], svg[aria-label*="save"]'];e<o.length;e++){var i=o[e];if(t=document.querySelector(i)){console.log("Found section with selector: ".concat(i));break}}if(!t)return void console.log("No Instagram action section found on this page")}if(!document.getElementById("primer-instant-button")){var a=n||document.querySelector('section[role="main"] section');if(a){console.log("Action container found:",a);var r=document.createElement("button");if(r.id="primer-instant-button",r.textContent="Instant",r.style.cssText="\n      background: #4A9EFF;\n      color: white;\n      border: none;\n      padding: 8px 32px;\n      border-radius: 8px;\n      font-size: 14px;\n      font-weight: 600;\n      cursor: pointer;\n      min-width: 120px;\n      margin-right: 8px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n      transition: all 0.2s ease;\n      z-index: 1000;\n      position: relative;\n    ",r.addEventListener("mouseenter",function(){r.style.background="#3A8EEF",r.style.transform="scale(1.02)"}),r.addEventListener("mouseleave",function(){r.style.background="#4A9EFF",r.style.transform="scale(1)"}),r.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),console.log("Instant button clicked!"),chrome.runtime.sendMessage({action:"instantCapture",url:window.location.href,timestamp:(new Date).toISOString()}),r.textContent="Captured!",r.style.background="#28a745",setTimeout(function(){r.textContent="Instant",r.style.background="#4A9EFF"},2e3)}),a){var s=a.querySelector('div[style*="flex"], div[class*="flex"]')||a.querySelector("div > div")||a;s.firstChild?(s.insertBefore(r,s.firstChild),console.log("Instant button injected successfully at the beginning of action container")):(s.appendChild(r),console.log("Instant button injected successfully (appended to container)"))}}else console.log("No action container found")}};n(),new MutationObserver(function(t){t.forEach(function(){document.getElementById("primer-instant-button")||setTimeout(n,1e3)})}).observe(document.body,{childList:!0,subtree:!0})}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n(),chrome.runtime.onMessage.addListener(function(n,t,e){"getPageInfo"===n.action&&e({title:document.title,url:window.location.href,domain:window.location.hostname})})})();
