chrome.runtime.onInstalled.addListener(function(t){console.log("Extension installed:",t),chrome.storage.sync.set({theme:"light",notifications:!0,autoSave:!1})}),chrome.runtime.onMessage.addListener(function(t,e,o){if(console.log("Message received:",t),"getTabInfo"===t.action)return chrome.tabs.query({active:!0,currentWindow:!0},function(t){var e,n;o({url:null===(e=t[0])||void 0===e?void 0:e.url,title:null===(n=t[0])||void 0===n?void 0:n.title})}),!0;var n,i,a;"updateBadge"===t.action&&chrome.action.setBadgeText({text:t.text||"",tabId:null===(n=e.tab)||void 0===n?void 0:n.id}),"instantCapture"===t.action&&(console.log("Instant capture triggered:",t),chrome.action.setBadgeText({text:"ðŸ“¸",tabId:null===(i=e.tab)||void 0===i?void 0:i.id}),setTimeout(function(){var t;chrome.action.setBadgeText({text:"",tabId:null===(t=e.tab)||void 0===t?void 0:t.id})},3e3),chrome.storage.local.set({lastCapture:{url:t.url,timestamp:t.timestamp,tabId:null===(a=e.tab)||void 0===a?void 0:a.id}}))}),chrome.tabs.onUpdated.addListener(function(t,e,o){"complete"===e.status&&o.url&&console.log("Tab updated:",o.url)}),chrome.action.onClicked.addListener(function(t){console.log("Extension clicked:",t)});
